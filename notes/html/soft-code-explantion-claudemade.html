<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Your Foundation — From Business Leader to Software Architect</title>
  <style>
    :root {
      --bg: #0a0c10;
      --surface: #12141a;
      --panel: #181b24;
      --border: #1f2330;
      --text: #e8ecf4;
      --muted: #9aa3b8;
      --dim: #6b7590;
      --faint: #3d4560;
      --accent: #63b3ed;
      --orange: #ed8936;
      --green: #48bb78;
      --blue: #63b3ed;
      --purple: #b794f4;
      --red: #fc8181;
      --gold: #ecc94b;
      --code-bg: #0e1018;
      --glow-blue: rgba(99, 179, 237, 0.12);
      --glow-green: rgba(72, 187, 120, 0.10);
      --glow-orange: rgba(237, 137, 54, 0.10);
      --glow-purple: rgba(183, 148, 244, 0.10);
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.75;
      -webkit-font-smoothing: antialiased;
    }

    /* ── Progress bar ── */
    .reading-progress {
      position: fixed; top: 0; left: 0; right: 0; height: 3px;
      background: var(--surface); z-index: 100;
    }
    .reading-progress-fill {
      height: 100%; width: 0%;
      background: linear-gradient(90deg, var(--orange), var(--green), var(--blue), var(--purple));
      transition: width 0.15s ease;
    }

    /* ── Nav ── */
    .nav {
      position: fixed; top: 3px; left: 0; right: 0;
      background: rgba(10, 12, 16, 0.92); backdrop-filter: blur(12px);
      border-bottom: 1px solid var(--border); z-index: 99;
      padding: 0 20px;
    }
    .nav-inner {
      max-width: 800px; margin: 0 auto;
      display: flex; align-items: center; gap: 6px;
      overflow-x: auto; padding: 10px 0;
      scrollbar-width: none;
    }
    .nav-inner::-webkit-scrollbar { display: none; }
    .nav-pill {
      padding: 5px 14px; border-radius: 20px; font-size: 11px;
      font-weight: 600; color: var(--faint); cursor: pointer;
      transition: all 0.25s; border: none; background: transparent;
      white-space: nowrap; letter-spacing: 0.3px;
      text-decoration: none;
    }
    .nav-pill:hover { color: var(--muted); background: rgba(255,255,255,0.04); }
    .nav-pill.active { background: rgba(99, 179, 237, 0.12); color: var(--accent); }

    /* ── Main container ── */
    .container {
      max-width: 760px; margin: 0 auto;
      padding: 80px 24px 120px;
    }

    /* ── Sections ── */
    section {
      margin-bottom: 100px;
      scroll-margin-top: 64px;
    }
    .section-label {
      font-size: 11px; font-weight: 700; text-transform: uppercase;
      letter-spacing: 2.5px; margin-bottom: 12px;
    }
    .section-label.orange { color: var(--orange); }
    .section-label.green { color: var(--green); }
    .section-label.blue { color: var(--blue); }
    .section-label.purple { color: var(--purple); }
    .section-label.gold { color: var(--gold); }

    h1 {
      font-size: clamp(32px, 6vw, 52px); font-weight: 800;
      line-height: 1.1; margin-bottom: 16px;
      background: linear-gradient(135deg, #f7fafc 0%, var(--accent) 100%);
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    h2 {
      font-size: clamp(22px, 4vw, 32px); font-weight: 800;
      line-height: 1.2; margin-bottom: 12px; color: #f7fafc;
    }
    h3 {
      font-size: 18px; font-weight: 700; margin-bottom: 8px;
      color: var(--text);
    }
    .subtitle {
      font-size: clamp(16px, 2.5vw, 20px); color: var(--dim);
      line-height: 1.6; margin-bottom: 32px; max-width: 600px;
    }

    p { margin-bottom: 20px; color: var(--muted); font-size: 16px; }
    p strong { color: var(--text); font-weight: 600; }
    p em { color: var(--accent); font-style: normal; }

    /* ── Hero ── */
    .hero {
      min-height: 80vh; display: flex; flex-direction: column;
      justify-content: center; margin-bottom: 80px;
      scroll-margin-top: 64px;
    }
    .hero-tagline {
      font-size: 14px; color: var(--dim); margin-top: 24px;
      border-left: 3px solid var(--faint); padding-left: 16px;
      line-height: 1.8;
    }

    /* ── Panels ── */
    .panel {
      background: var(--panel); border: 1px solid var(--border);
      border-radius: 16px; padding: 24px; margin: 24px 0;
    }
    .panel.glow-blue { border-color: rgba(99,179,237,0.25); background: linear-gradient(135deg, var(--panel), rgba(99,179,237,0.04)); }
    .panel.glow-green { border-color: rgba(72,187,120,0.25); background: linear-gradient(135deg, var(--panel), rgba(72,187,120,0.04)); }
    .panel.glow-orange { border-color: rgba(237,137,54,0.25); background: linear-gradient(135deg, var(--panel), rgba(237,137,54,0.04)); }
    .panel.glow-purple { border-color: rgba(183,148,244,0.25); background: linear-gradient(135deg, var(--panel), rgba(183,148,244,0.04)); }
    .panel.glow-gold { border-color: rgba(236,201,75,0.25); background: linear-gradient(135deg, var(--panel), rgba(236,201,75,0.04)); }

    .panel-title {
      font-size: 13px; font-weight: 700; margin-bottom: 12px;
      letter-spacing: 0.5px;
    }

    /* ── Analogy boxes ── */
    .analogy {
      border-radius: 14px; padding: 20px 24px; margin: 24px 0;
      border-left: 4px solid; background: var(--surface);
    }
    .analogy.blue { border-left-color: var(--blue); }
    .analogy.green { border-left-color: var(--green); }
    .analogy.orange { border-left-color: var(--orange); }
    .analogy.purple { border-left-color: var(--purple); }
    .analogy.gold { border-left-color: var(--gold); }
    .analogy-label {
      font-size: 11px; font-weight: 700; text-transform: uppercase;
      letter-spacing: 2px; margin-bottom: 8px;
    }
    .analogy-label.blue { color: var(--blue); }
    .analogy-label.green { color: var(--green); }
    .analogy-label.orange { color: var(--orange); }
    .analogy-label.purple { color: var(--purple); }
    .analogy-label.gold { color: var(--gold); }
    .analogy p { font-size: 15px; margin-bottom: 10px; }
    .analogy p:last-child { margin-bottom: 0; }

    /* ── Code blocks ── */
    .code-block {
      background: var(--code-bg); border: 1px solid var(--border);
      border-radius: 14px; padding: 20px 24px; margin: 20px 0;
      font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', ui-monospace, monospace;
      font-size: 13px; line-height: 2; overflow-x: auto;
      -webkit-overflow-scrolling: touch;
    }
    .code-line {
      display: flex; gap: 14px; align-items: baseline;
      padding: 2px 0; border-left: 3px solid transparent;
      padding-left: 14px; margin-left: -14px; border-radius: 2px;
      flex-wrap: wrap;
    }
    .code-line.hi { background: var(--glow-blue); border-left-color: var(--blue); }
    .code-line.hi-orange { background: var(--glow-orange); border-left-color: var(--orange); }
    .code-line.hi-green { background: var(--glow-green); border-left-color: var(--green); }
    .code-line.hi-purple { background: var(--glow-purple); border-left-color: var(--purple); }
    .code-text {
      color: var(--dim); white-space: pre;
      min-width: 0;
    }
    .code-line.hi .code-text,
    .code-line.hi-orange .code-text,
    .code-line.hi-green .code-text,
    .code-line.hi-purple .code-text { color: var(--text); }
    .code-note {
      color: var(--accent); font-size: 12px; opacity: 0.9;
      white-space: normal; min-width: 0;
    }
    .code-note.orange { color: var(--orange); }
    .code-note.green { color: var(--green); }
    .code-note.purple { color: var(--purple); }

    /* ── Explanation blocks ── */
    .explain {
      background: var(--surface); border-radius: 12px;
      padding: 18px 22px; margin: 16px 0;
      border: 1px solid var(--border);
    }
    .explain-title {
      font-size: 12px; font-weight: 700; text-transform: uppercase;
      letter-spacing: 1.5px; margin-bottom: 8px; color: var(--accent);
    }
    .explain p { font-size: 14px; margin-bottom: 8px; }
    .explain p:last-child { margin-bottom: 0; }

    /* ── Flow diagrams ── */
    .flow { display: flex; flex-direction: column; align-items: center; gap: 8px; padding: 16px 0; }
    .flow-box {
      border-radius: 14px; padding: 16px 28px; text-align: center;
      width: 100%; max-width: 360px; border: 2px solid;
    }
    .flow-box-name { font-weight: 800; font-size: 16px; }
    .flow-box-desc { font-size: 13px; color: var(--muted); margin-top: 4px; }
    .flow-arrow { display: flex; flex-direction: column; align-items: center; gap: 2px; }
    .flow-arrow-line { width: 2px; height: 14px; background: var(--faint); }
    .flow-arrow-label {
      background: var(--surface); padding: 4px 16px; border-radius: 20px;
      font-size: 12px; color: var(--muted);
      font-family: 'JetBrains Mono', monospace;
      border: 1px solid var(--border);
    }
    .flow-arrow-tip {
      width: 0; height: 0;
      border-left: 6px solid transparent; border-right: 6px solid transparent;
      border-top: 8px solid var(--faint);
    }

    /* ── Sandwich ── */
    .sandwich { display: flex; flex-direction: column; gap: 6px; max-width: 480px; margin: 24px auto; }
    .sandwich-layer {
      display: flex; align-items: center; gap: 14px;
      padding: 14px 20px; border-radius: 12px;
      border: 1.5px solid; font-size: 14px;
    }
    .sandwich-label {
      font-family: 'JetBrains Mono', monospace;
      font-weight: 600; font-size: 13px;
    }
    .sandwich-type {
      font-size: 10px; text-transform: uppercase;
      letter-spacing: 1.5px; margin-top: 2px; color: var(--muted);
    }
    .sandwich-icon { font-size: 22px; flex-shrink: 0; }

    /* ── File tree ── */
    .file-tree {
      font-family: 'JetBrains Mono', monospace; font-size: 13px;
      line-height: 2.2; padding: 8px 0;
    }
    .file-tree-line { display: flex; gap: 12px; align-items: baseline; }
    .file-tree-path { color: var(--dim); }
    .file-tree-path.active { color: var(--text); font-weight: 600; }
    .file-tree-note { color: var(--accent); font-size: 11px; }
    .file-tree-note.orange { color: var(--orange); }
    .file-tree-note.green { color: var(--green); }
    .file-tree-note.purple { color: var(--purple); }

    /* ── Steps / numbered items ── */
    .step-grid {
      display: flex; flex-direction: column; gap: 16px; margin: 24px 0;
    }
    .step-item {
      display: flex; gap: 16px; align-items: flex-start;
      padding: 18px 22px; border-radius: 14px;
      border: 2px solid; transition: transform 0.2s;
    }
    .step-item:hover { transform: translateY(-1px); }
    .step-num {
      width: 38px; height: 38px; border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-weight: 800; font-size: 16px; color: white; flex-shrink: 0;
    }
    .step-content { flex: 1; min-width: 0; }
    .step-title { font-weight: 800; font-size: 15px; margin-bottom: 4px; }
    .step-desc { font-size: 14px; color: var(--muted); line-height: 1.6; }

    /* ── Comparison table ── */
    .compare {
      display: grid; grid-template-columns: 1fr 1fr; gap: 16px;
      margin: 24px 0;
    }
    .compare-box {
      border-radius: 14px; padding: 20px; border: 2px solid;
    }
    .compare-title { font-size: 13px; font-weight: 700; margin-bottom: 10px; }
    .compare-body { font-size: 14px; color: var(--muted); line-height: 1.7; }
    @media (max-width: 580px) {
      .compare { grid-template-columns: 1fr; }
    }

    /* ── Callout ── */
    .callout {
      border-radius: 14px; padding: 20px 24px; margin: 24px 0;
      border: 2px solid; position: relative;
    }
    .callout-icon {
      position: absolute; top: -14px; left: 20px;
      background: var(--bg); padding: 2px 8px; font-size: 20px;
    }
    .callout-title { font-weight: 700; font-size: 14px; margin-bottom: 8px; }
    .callout-body { font-size: 14px; color: var(--muted); line-height: 1.7; }

    /* ── Dividers ── */
    .divider {
      height: 1px; background: var(--border); margin: 60px 0;
    }
    .divider-text {
      text-align: center; padding: 40px 0;
      font-size: 12px; color: var(--faint); letter-spacing: 4px;
      text-transform: uppercase; font-weight: 700;
    }

    /* ── Limit line ── */
    .limit-line {
      margin: 60px 0; padding: 40px 0; text-align: center;
      border-top: 2px dashed var(--red);
      border-bottom: 2px dashed var(--red);
      background: rgba(252, 129, 129, 0.04);
      border-radius: 0;
    }
    .limit-line-title {
      font-size: 20px; font-weight: 800; color: var(--red);
      margin-bottom: 8px;
    }
    .limit-line-desc {
      font-size: 15px; color: var(--muted); max-width: 520px;
      margin: 0 auto; line-height: 1.7;
    }

    /* ── Next level teaser ── */
    .next-level {
      background: linear-gradient(135deg, rgba(183,148,244,0.08), rgba(99,179,237,0.08));
      border: 2px solid rgba(183,148,244,0.2);
      border-radius: 20px; padding: 40px 32px; margin: 40px 0;
      text-align: center;
    }
    .next-level h3 { font-size: 24px; color: var(--purple); margin-bottom: 12px; }
    .next-level p { max-width: 560px; margin: 0 auto 16px; }

    /* ── Footer ── */
    footer {
      text-align: center; padding: 60px 24px;
      font-size: 13px; color: var(--faint); line-height: 1.8;
    }
    footer strong { color: var(--dim); }

    /* ── Responsive ── */
    @media (max-width: 480px) {
      .container { padding: 70px 16px 80px; }
      section { margin-bottom: 72px; }
      .panel { padding: 18px; }
      .code-block { padding: 14px 16px; font-size: 12px; }
      .analogy { padding: 16px 18px; }
      .step-item { padding: 14px 16px; flex-direction: column; gap: 10px; }
      .step-num { width: 32px; height: 32px; font-size: 14px; }
      .flow-box { padding: 14px 20px; }
      .sandwich-layer { padding: 10px 14px; }
    }
  </style>
</head>
<body>

<!-- Reading progress -->
<div class="reading-progress"><div class="reading-progress-fill" id="progressFill"></div></div>

<!-- Navigation -->
<nav class="nav">
  <div class="nav-inner">
    <a class="nav-pill" href="#start">Start</a>
    <a class="nav-pill" href="#why-you">Why You</a>
    <a class="nav-pill" href="#the-program">The Program</a>
    <a class="nav-pill" href="#every-line">Every Line</a>
    <a class="nav-pill" href="#how-it-runs">How It Runs</a>
    <a class="nav-pill" href="#the-wall">The Wall</a>
    <a class="nav-pill" href="#next-level">Next Level</a>
    <a class="nav-pill" href="#your-path">Your Path</a>
  </div>
</nav>

<div class="container">

<!-- ================================================================ -->
<!-- HERO -->
<!-- ================================================================ -->
<section class="hero" id="start">
  <div class="section-label orange">Your Foundation</div>
  <h1>You Don't Need to Be a Coder.<br>You Need to Think Like an Architect.</h1>
  <div class="subtitle">
    A deep, line-by-line guide to the program that proves you can build enterprise software with AI &mdash; and an honest look at where it stops working, and what comes next.
  </div>
  <div class="hero-tagline">
    This document was built for someone who ran a business before they ever opened a code editor. Someone who learned more from serving customers than from sitting in lectures. Someone who resonated deeply with a manifesto about keeping software <em>changeable</em> &mdash; and wants to know: can I actually build this?<br><br>
    <strong>The answer is yes.</strong> And this is your map.
  </div>
</section>

<!-- ================================================================ -->
<!-- PART 1: WHY YOU -->
<!-- ================================================================ -->
<section id="why-you">
  <div class="section-label green">Part One</div>
  <h2>Why a Business Leader Has the Hardest Part Already</h2>

  <p>Here's what nobody tells you about software architecture: <strong>the hardest skill isn't coding. It's knowing how to separate concerns.</strong></p>

  <p>When you ran a business, you didn't have your receptionist also doing accounting, also managing inventory, also closing sales. You separated roles. You gave each person one clear job. When someone quit, you could replace them without the whole operation collapsing. When business changed, you adjusted one role, not all of them.</p>

  <p><strong>That is software architecture.</strong> That exact instinct. The code just happens to be written in Python instead of job descriptions.</p>

  <div class="analogy blue">
    <div class="analogy-label blue">The Connection You Already Have</div>
    <p><strong>Business thinking:</strong> "The sales team handles customers. The warehouse handles inventory. They talk through order forms. Neither needs to understand the other's internal process."</p>
    <p><strong>Software thinking:</strong> "The decision logic handles calculations. The adapter handles files and web requests. They talk through data shapes. Neither needs to understand the other's internal code."</p>
    <p><strong>Same instinct. Same discipline. Different vocabulary.</strong></p>
  </div>

  <p>School teaches you to follow instructions sequentially &mdash; read chapter 1, then chapter 2, pass the test. That's not how business works, and it's not how architecture works either. Architecture is about <em>seeing the structure</em> &mdash; understanding which pieces connect to which, what can change independently, and where the pressure points are.</p>

  <p>You've been doing that your whole career. You just didn't know it had a name in software.</p>

  <div class="panel glow-green">
    <div class="panel-title" style="color:var(--green)">What "Enterprise Level" Actually Means</div>
    <p style="font-size:14px">Enterprise software isn't about complexity. It's about <strong>changeability at scale</strong>. A startup builds fast and breaks things. An enterprise builds things that hundreds of people depend on, that must keep working while being changed, that must absorb new requirements without collapsing. That requires the exact discipline you're about to learn &mdash; separation of concerns, enforced mechanically, not by willpower.</p>
  </div>
</section>

<!-- ================================================================ -->
<!-- PART 2: THE PROGRAM -->
<!-- ================================================================ -->
<section id="the-program">
  <div class="section-label blue">Part Two</div>
  <h2>What This Program Actually Is</h2>

  <p>The repository you're looking at &mdash; <strong>tool-hub</strong> &mdash; is not one program. It's a <em>factory for building business tools</em>. Think of it as a workshop with a very strict set of rules about how every tool must be built.</p>

  <p>Right now, it contains tools like:</p>

  <div class="compare">
    <div class="compare-box" style="border-color:var(--orange);background:var(--glow-orange)">
      <div class="compare-title" style="color:var(--orange)">Label Generator</div>
      <div class="compare-body">Takes a spreadsheet of addresses &rarr; produces a PDF of Avery 5160 mailing labels. Like what you'd use to send 500 holiday cards.</div>
    </div>
    <div class="compare-box" style="border-color:var(--blue);background:var(--glow-blue)">
      <div class="compare-title" style="color:var(--blue)">Order Quote Calculator</div>
      <div class="compare-body">Takes items, quantities, and a coupon &rarr; produces a price breakdown with discounts, shipping, and tax. Like a shopping cart backend.</div>
    </div>
  </div>

  <p>But <strong>the tools aren't the point</strong>. The point is the <em>architecture</em> &mdash; the strict rules about how every tool is built. Those rules are what make the code <strong>stay changeable</strong> over hundreds of iterations instead of turning into a tangled mess.</p>

  <p>Let's look at the structure. Every single tool follows this exact file layout:</p>

  <div class="panel">
    <div class="file-tree">
      <div class="file-tree-line"><span class="file-tree-path active">core/label_generator/</span><span class="file-tree-note">The brain &mdash; pure logic, no I/O</span></div>
      <div class="file-tree-line"><span class="file-tree-path">&nbsp;&nbsp;DECISIONS.md</span><span class="file-tree-note orange">What decisions does this tool make?</span></div>
      <div class="file-tree-line"><span class="file-tree-path">&nbsp;&nbsp;contracts.py</span><span class="file-tree-note">The "front door" &mdash; what goes in, what comes out</span></div>
      <div class="file-tree-line"><span class="file-tree-path">&nbsp;&nbsp;domain/</span><span class="file-tree-note green">The "forms" &mdash; data shapes</span></div>
      <div class="file-tree-line"><span class="file-tree-path">&nbsp;&nbsp;&nbsp;&nbsp;models.py</span><span class="file-tree-note green">Describes every piece of data the tool uses</span></div>
      <div class="file-tree-line"><span class="file-tree-path">&nbsp;&nbsp;&nbsp;&nbsp;specs.py</span><span class="file-tree-note">Constants (page size, margins, etc.)</span></div>
      <div class="file-tree-line"><span class="file-tree-path">&nbsp;&nbsp;application/</span><span class="file-tree-note purple">The actual work</span></div>
      <div class="file-tree-line"><span class="file-tree-path">&nbsp;&nbsp;&nbsp;&nbsp;input_validation.py</span><span class="file-tree-note">Checks: is this input valid?</span></div>
      <div class="file-tree-line"><span class="file-tree-path">&nbsp;&nbsp;&nbsp;&nbsp;decision_logic.py</span><span class="file-tree-note purple">The business decisions (pure math)</span></div>
      <div class="file-tree-line"><span class="file-tree-path">&nbsp;&nbsp;&nbsp;&nbsp;output_mapping.py</span><span class="file-tree-note">Formats the result for output</span></div>
      <div class="file-tree-line"><span class="file-tree-path">&nbsp;&nbsp;&nbsp;&nbsp;orchestrator.py</span><span class="file-tree-note orange">3 lines. Just calls the steps in order.</span></div>
      <div class="file-tree-line"><span class="file-tree-path">&nbsp;&nbsp;tests/</span><span class="file-tree-note">Proof that it works</span></div>
      <div class="file-tree-line"><span class="file-tree-path active">adapters/flask/label_generator/</span><span class="file-tree-note">The hands &mdash; files, web, PDFs</span></div>
      <div class="file-tree-line"><span class="file-tree-path">&nbsp;&nbsp;app.py</span><span class="file-tree-note">Web routes (URLs people visit)</span></div>
      <div class="file-tree-line"><span class="file-tree-path">&nbsp;&nbsp;io.py</span><span class="file-tree-note">Reads files, renders PDFs</span></div>
      <div class="file-tree-line"><span class="file-tree-path">&nbsp;&nbsp;presenter.py</span><span class="file-tree-note">Translates web requests into core format</span></div>
    </div>
  </div>

  <div class="analogy orange">
    <div class="analogy-label orange">Think of it like a restaurant</div>
    <p><strong>core/</strong> is the kitchen. Pure cooking. The chef doesn't interact with customers, doesn't handle money, doesn't set tables. Just takes an order ticket and produces food.</p>
    <p><strong>adapters/</strong> is the front of house. Takes customer requests, writes them on order tickets, hands food to the customer. The waiter doesn't cook. The chef doesn't serve.</p>
    <p><strong>contracts.py</strong> is the order ticket itself &mdash; the agreed format that both sides understand.</p>
    <p><strong>Why separate them?</strong> You can change the menu (core logic) without retraining the waitstaff. You can redesign the dining room (web interface) without touching a single recipe. That's the power.</p>
  </div>
</section>

<!-- ================================================================ -->
<!-- PART 3: EVERY LINE EXPLAINED -->
<!-- ================================================================ -->
<section id="every-line">
  <div class="section-label orange">Part Three</div>
  <h2>Every Line, Explained Like You're the Business Owner</h2>

  <p>Let's go through the actual code. Not "code overview" &mdash; the actual lines. I'll explain every single one so you can read it yourself and <strong>know what you're looking at</strong>.</p>

  <!-- ── DATA SHAPES ── -->
  <h3 style="margin-top:40px">Chapter 1: The Data Shapes (The Forms)</h3>

  <p>Before any logic runs, the program defines what kinds of information it works with. Think of these like blank forms at a doctor's office &mdash; they define the structure of information before anyone fills anything in.</p>

  <div class="code-block">
    <div class="code-line hi-orange"><span class="code-text">@dataclass</span><span class="code-note orange">This means: "What follows is a data form"</span></div>
    <div class="code-line hi-orange"><span class="code-text">class LabelFieldConfig:</span><span class="code-note orange">Name of the form: "How one field on a label should look"</span></div>
    <div class="code-line"><span class="code-text">    column: str | None</span><span class="code-note">Which spreadsheet column to pull text from (or None if static)</span></div>
    <div class="code-line"><span class="code-text">    y_in: float</span><span class="code-note">How far down on the label, in inches</span></div>
    <div class="code-line"><span class="code-text">    align: str</span><span class="code-note">"left", "center", or "right"</span></div>
    <div class="code-line"><span class="code-text">    font_family: str</span><span class="code-note">Which font to use (like Helvetica)</span></div>
    <div class="code-line"><span class="code-text">    font_weight: str</span><span class="code-note">"Regular" or "Bold"</span></div>
    <div class="code-line"><span class="code-text">    size_pt: float</span><span class="code-note">Font size in points (like 12pt in Word)</span></div>
    <div class="code-line hi"><span class="code-text">    is_static: bool</span><span class="code-note">True = same text on EVERY label. False = comes from spreadsheet</span></div>
    <div class="code-line"><span class="code-text">    static_text: str</span><span class="code-note">The fixed text to use (only matters when is_static is True)</span></div>
    <div class="code-line"><span class="code-text">    prefix: str</span><span class="code-note">Text added before the value, like "Tel: " before a phone number</span></div>
    <div class="code-line"><span class="code-text">    suffix: str</span><span class="code-note">Text added after the value</span></div>
    <div class="code-line hi"><span class="code-text">    is_header: bool</span><span class="code-note">If True, text gets UPPERCASE + Bold automatically</span></div>
  </div>

  <div class="explain">
    <div class="explain-title">What you just read</div>
    <p>This is a <strong>design spec for one line of text on a label</strong>. If you were designing labels in Microsoft Word, you'd set: which column from my spreadsheet? What font? What size? Where on the label? That's exactly what this does.</p>
    <p>The word <strong>dataclass</strong> just means "this is a form with fields." The word <strong>class</strong> just means "this is a type of thing." The colons (like <code>y_in: float</code>) mean "this field holds this type of data." <strong>float</strong> = a number with decimals. <strong>str</strong> = text. <strong>bool</strong> = yes or no (True/False).</p>
    <p><strong>There is zero logic here.</strong> No calculations, no decisions. Just a description of what information exists. This is intentional. The form doesn't do anything &mdash; it just defines what data looks like.</p>
  </div>

  <p>Now here's the complete work order that the brain receives:</p>

  <div class="code-block">
    <div class="code-line hi"><span class="code-text">@dataclass</span><span class="code-note"></span></div>
    <div class="code-line hi"><span class="code-text">class LabelJob:</span><span class="code-note">A complete work order for generating labels</span></div>
    <div class="code-line"><span class="code-text">    sheet_name: str</span><span class="code-note">Which worksheet tab to use</span></div>
    <div class="code-line hi-green"><span class="code-text">    rows: list[dict[str, Any]]</span><span class="code-note green">The actual data from the spreadsheet</span></div>
    <div class="code-line hi-orange"><span class="code-text">    fields: list[LabelFieldConfig]</span><span class="code-note orange">How to design each field (the form above!)</span></div>
    <div class="code-line"><span class="code-text">    copies_per_record: int</span><span class="code-note">How many copies of each label to print</span></div>
    <div class="code-line"><span class="code-text">    use_template: bool</span><span class="code-note">Should we overlay on an Avery template?</span></div>
    <div class="code-line"><span class="code-text">    timestamp_utc: str</span><span class="code-note">When this job was created (for the filename)</span></div>
  </div>

  <div class="explain">
    <div class="explain-title">Breaking this down</div>
    <p><strong><code>rows: list[dict[str, Any]]</code></strong> &mdash; This looks intimidating. Let's decode it:</p>
    <p>&bull; <strong>list</strong> means "a collection of things in order" (like a list of customers)</p>
    <p>&bull; <strong>dict[str, Any]</strong> means "a dictionary where the keys are text and the values can be anything" &mdash; think of it like one row of a spreadsheet: {"Name": "John Smith", "Address": "123 Main St", "City": "Dallas"}</p>
    <p>&bull; So <strong>list[dict[str, Any]]</strong> means: "all the rows from the spreadsheet, each row being a set of column-name-to-value pairs"</p>
    <p><strong><code>fields: list[LabelFieldConfig]</code></strong> &mdash; This says "a list of LabelFieldConfig forms." The brain receives the data AND the design instructions in one package. Like a print shop getting both the mailing list and the label template.</p>
    <p><strong>Key insight:</strong> The rows are already loaded. This form doesn't know if they came from an Excel file, a CSV file, a database, or a web upload. <strong>The brain doesn't care where data comes from.</strong> That's the adapter's job.</p>
  </div>

  <p>And here's what the brain produces &mdash; the output:</p>

  <div class="code-block">
    <div class="code-line hi-green"><span class="code-text">@dataclass</span><span class="code-note"></span></div>
    <div class="code-line hi-green"><span class="code-text">class RenderPlan:</span><span class="code-note green">The brain's complete output</span></div>
    <div class="code-line"><span class="code-text">    input_rows: int</span><span class="code-note">How many rows came in from the spreadsheet</span></div>
    <div class="code-line"><span class="code-text">    filtered_rows: int</span><span class="code-note">How many survived filtering (blank rows removed)</span></div>
    <div class="code-line hi-green"><span class="code-text">    total_labels: int</span><span class="code-note green">After applying copies (30 rows x 2 copies = 60 labels)</span></div>
    <div class="code-line"><span class="code-text">    labels_per_page: int</span><span class="code-note">30 for Avery 5160 (10 rows x 3 columns)</span></div>
    <div class="code-line hi-green"><span class="code-text">    slots: list[LabelSlot]</span><span class="code-note green">Every single label, positioned on a page, text formatted</span></div>
  </div>

  <div class="explain">
    <div class="explain-title">This is critical</div>
    <p>The brain does NOT produce a PDF. It produces a <strong>plan</strong>. It says: "Here are 60 labels. Label #1 goes at these exact coordinates on page 1. Label #31 starts page 2. Here's the formatted text for each one."</p>
    <p>The adapter (the "hands") takes this plan and actually renders it into a real PDF file. But the plan itself is <strong>pure information</strong>. You could render it to PDF, HTML, a physical printer, or just display it on screen.</p>
    <p><strong>This is why the separation matters:</strong> change the rendering without touching the logic. Change the logic without touching the rendering. They are completely independent.</p>
  </div>

  <!-- ── THE ORCHESTRATOR ── -->
  <h3 style="margin-top:48px">Chapter 2: The Orchestrator (The Recipe Card)</h3>

  <p>Now the moment of truth. After all those data shapes, here is <strong>the entire program</strong>:</p>

  <div class="code-block">
    <div class="code-line"><span class="code-text">def run(payload):</span><span class="code-note">The entire program starts here. "payload" is the raw input.</span></div>
    <div class="code-line"><span class="code-text"></span></div>
    <div class="code-line hi-orange"><span class="code-text">    job = service.build_job(payload)</span><span class="code-note orange">Step 1: Validate the input, create a LabelJob</span></div>
    <div class="code-line"><span class="code-text"></span></div>
    <div class="code-line hi-green"><span class="code-text">    plan = service.compute_plan(job)</span><span class="code-note green">Step 2: Do ALL the math. Produce a RenderPlan.</span></div>
    <div class="code-line"><span class="code-text"></span></div>
    <div class="code-line hi-purple"><span class="code-text">    return service.to_result_dict(job, plan)</span><span class="code-note purple">Step 3: Format the output for the adapter.</span></div>
  </div>

  <div class="explain">
    <div class="explain-title">Three lines. That's the whole thing.</div>
    <p><strong>Line 1: <code>job = service.build_job(payload)</code></strong></p>
    <p>"Take the raw data that came in (the <em>payload</em>) and validate it. Check: are there fields? Are the values the right type? Is anything missing? If everything checks out, package it into a clean <em>LabelJob</em>. If something's wrong, stop right here with an error."</p>
    <p>Think of it like the front desk checking a work order before sending it to the shop floor. "Does this order have a quantity? Is the part number valid? OK, it's good &mdash; send it through."</p>

    <p style="margin-top:16px"><strong>Line 2: <code>plan = service.compute_plan(job)</code></strong></p>
    <p>"Take the validated job and do all the work. Filter out blank rows. Make copies. Calculate where every single label goes on every page. Format the text for each field. The output is a complete <em>RenderPlan</em> with every label positioned and formatted."</p>
    <p>This is where every business decision happens &mdash; and it's all pure math. No files, no web requests, no PDF libraries. Just calculations.</p>

    <p style="margin-top:16px"><strong>Line 3: <code>return service.to_result_dict(job, plan)</code></strong></p>
    <p>"Take the job and the plan and package them into a result that the adapter can understand. Generate the download filename. Serialize the data. Hand it back."</p>
    <p>Like the shop floor putting the finished product on the outbound shelf with a packing slip.</p>
  </div>

  <div class="analogy green">
    <div class="analogy-label green">Why only 3 lines?</div>
    <p>This is a <strong>hard rule</strong> in this codebase, not a suggestion. The orchestrator is enforced by an automated check (<em>check_orchestrator_dumb.py</em>) that rejects any orchestrator with <code>if</code>, <code>for</code>, <code>while</code>, <code>try</code>, or more than 60 lines.</p>
    <p>Why? Because the orchestrator is the <strong>table of contents</strong>. If you put logic in the table of contents, nobody can read the book. The details belong in the chapters (the service functions). The table of contents just lists them in order.</p>
    <p><strong>In business terms:</strong> the CEO doesn't do the work. The CEO says "first we validate, then we compute, then we deliver." The departments do the actual work.</p>
  </div>

  <!-- ── THE DECISION FUNCTIONS ── -->
  <h3 style="margin-top:48px">Chapter 3: Inside the Decision Functions (Where the Real Work Happens)</h3>

  <p>Those three lines in the orchestrator call into functions that do the actual thinking. Let's look inside each one.</p>

  <p><strong>Step 1: Validating the input</strong></p>

  <div class="code-block">
    <div class="code-line hi-orange"><span class="code-text">def build_job(payload):</span><span class="code-note orange">Takes the raw input dict, returns a clean LabelJob</span></div>
    <div class="code-line"><span class="code-text">    validated = validate_payload(payload)</span><span class="code-note">Check: are required fields present?</span></div>
    <div class="code-line"><span class="code-text">    fields = normalize_fields(validated)</span><span class="code-note">Clean up the field configs (defaults, etc.)</span></div>
    <div class="code-line"><span class="code-text">    return LabelJob(</span><span class="code-note">Package it all into a LabelJob form</span></div>
    <div class="code-line"><span class="code-text">        sheet_name=validated["sheet_name"],</span><span class="code-note"></span></div>
    <div class="code-line"><span class="code-text">        rows=validated["rows"],</span><span class="code-note"></span></div>
    <div class="code-line"><span class="code-text">        fields=fields,</span><span class="code-note"></span></div>
    <div class="code-line"><span class="code-text">        copies_per_record=validated.get("copies", 1),</span><span class="code-note">Default to 1 copy if not specified</span></div>
    <div class="code-line"><span class="code-text">        ...</span><span class="code-note"></span></div>
    <div class="code-line"><span class="code-text">    )</span><span class="code-note"></span></div>
  </div>

  <div class="explain">
    <div class="explain-title">What's happening</div>
    <p><strong><code>def build_job(payload):</code></strong> &mdash; <code>def</code> means "define a function." This creates a function named <em>build_job</em> that receives one thing: the raw <em>payload</em> (a dictionary of data).</p>
    <p><strong><code>validated = validate_payload(payload)</code></strong> &mdash; Calls another function to check the data is valid. If it's not, this throws an error. If it is, the clean data is stored in a variable called <em>validated</em>.</p>
    <p><strong><code>return LabelJob(...)</code></strong> &mdash; Creates a new LabelJob form, fills in each field from the validated data, and sends it back. <code>return</code> means "give this result back to whoever called me."</p>
    <p><strong><code>.get("copies", 1)</code></strong> &mdash; This is a safe lookup. It says: "try to find a value called 'copies'. If it doesn't exist, use 1 as the default." Like a form that says "Quantity: ___ (leave blank for 1)."</p>
  </div>

  <p><strong>Step 2: The actual math (computing the plan)</strong></p>

  <div class="code-block">
    <div class="code-line hi-green"><span class="code-text">def compute_plan(job):</span><span class="code-note green">Takes a LabelJob, returns a RenderPlan</span></div>
    <div class="code-line"><span class="code-text">    filtered = _filter_blank_rows(job.rows)</span><span class="code-note">Remove rows where all fields are empty</span></div>
    <div class="code-line"><span class="code-text">    expanded = _expand_copies(filtered, job.copies_per_record)</span><span class="code-note">3 rows x 2 copies = 6 entries</span></div>
    <div class="code-line"><span class="code-text">    slots = []</span><span class="code-note">Start with an empty list of label positions</span></div>
    <div class="code-line"><span class="code-text">    for i, row in enumerate(expanded):</span><span class="code-note">For each row, with its index number...</span></div>
    <div class="code-line hi"><span class="code-text">        col, r, x, y = _slot_coordinates(i)</span><span class="code-note">Calculate WHERE on the page this label goes</span></div>
    <div class="code-line"><span class="code-text">        texts = _resolve_all_fields(row, job.fields)</span><span class="code-note">Format the text for each field</span></div>
    <div class="code-line"><span class="code-text">        slots.append(LabelSlot(...))</span><span class="code-note">Add this label to the list</span></div>
    <div class="code-line"><span class="code-text">    return RenderPlan(</span><span class="code-note"></span></div>
    <div class="code-line"><span class="code-text">        input_rows=len(job.rows),</span><span class="code-note">How many rows came in</span></div>
    <div class="code-line"><span class="code-text">        filtered_rows=len(filtered),</span><span class="code-note">How many survived filtering</span></div>
    <div class="code-line"><span class="code-text">        total_labels=len(slots),</span><span class="code-note">How many labels total</span></div>
    <div class="code-line"><span class="code-text">        slots=slots,</span><span class="code-note">Every label, positioned and formatted</span></div>
    <div class="code-line"><span class="code-text">    )</span><span class="code-note"></span></div>
  </div>

  <div class="explain">
    <div class="explain-title">Every line decoded</div>
    <p><strong><code>filtered = _filter_blank_rows(job.rows)</code></strong> &mdash; The underscore <code>_</code> at the start is a convention meaning "this function is private &mdash; only used inside this file." It takes all the spreadsheet rows and removes any where every field is empty. <strong>Business decision:</strong> blank rows don't become labels.</p>

    <p><strong><code>expanded = _expand_copies(filtered, job.copies_per_record)</code></strong> &mdash; If the user asked for 2 copies per label, this duplicates each row. 30 data rows with 2 copies = 60 entries. <strong>Business decision:</strong> copies are handled before positioning.</p>

    <p><strong><code>for i, row in enumerate(expanded):</code></strong> &mdash; <code>for</code> means "do this for each item." <code>enumerate</code> means "give me both the item and its position number." So <code>i</code> is 0, 1, 2, 3... and <code>row</code> is the actual data. It's like counting cards as you deal them: "card 0 goes here, card 1 goes there..."</p>

    <p><strong><code>col, r, x, y = _slot_coordinates(i)</code></strong> &mdash; This is the heart. Given "this is label number 7", it calculates: which column? which row? what's the exact x-position in inches? what's the exact y-position? Pure math based on the Avery 5160 spec. <strong>No PDF knowledge needed.</strong></p>

    <p><strong><code>slots.append(LabelSlot(...))</code></strong> &mdash; <code>append</code> means "add to the end of the list." Each loop creates one positioned, formatted label and adds it to the growing list.</p>
  </div>

  <p>Let's look at that coordinate function &mdash; the pure math at the heart of it all:</p>

  <div class="code-block">
    <div class="code-line hi"><span class="code-text">def _slot_coordinates(slot_index):</span><span class="code-note">Given label #N, where does it go?</span></div>
    <div class="code-line"><span class="code-text">    rows = 10</span><span class="code-note">Avery 5160 has 10 rows per column</span></div>
    <div class="code-line hi"><span class="code-text">    col = slot_index // rows</span><span class="code-note">Integer division: 0-9 = col 0, 10-19 = col 1, 20-29 = col 2</span></div>
    <div class="code-line hi"><span class="code-text">    row = slot_index % rows</span><span class="code-note">Remainder: position within the column (0-9)</span></div>
    <div class="code-line"><span class="code-text">    x_in = left_margin + col * (label_width + gap)</span><span class="code-note">Horizontal position in inches</span></div>
    <div class="code-line"><span class="code-text">    y_in = page_h - top_margin - (row + 1) * label_h</span><span class="code-note">Vertical position (PDF y-axis is flipped)</span></div>
    <div class="code-line"><span class="code-text">    return col, row, x_in, y_in</span><span class="code-note">That's it. Pure math. No PDF library.</span></div>
  </div>

  <div class="explain">
    <div class="explain-title">The math, in plain English</div>
    <p><strong><code>//</code></strong> is "integer division" &mdash; divide and drop the remainder. 7 // 10 = 0. 15 // 10 = 1. 25 // 10 = 2. This tells you which column.</p>
    <p><strong><code>%</code></strong> is "modulo" &mdash; the remainder after division. 7 % 10 = 7. 15 % 10 = 5. 25 % 10 = 5. This tells you which row within the column.</p>
    <p>So label #7: column 0, row 7. Label #15: column 1, row 5. Label #25: column 2, row 5.</p>
    <p>The fill order is <strong>top-down by column</strong>: labels 0-9 fill the left column top to bottom, 10-19 fill the middle column, 20-29 fill the right column. This matches how Avery 5160 sheets are actually printed.</p>
    <p><strong>This function has no idea it's going to be used in a PDF.</strong> It just computes coordinates. You could use these same coordinates to display labels on a webpage, send them to a printer API, or draw them on an SVG canvas. The math is the math, regardless of the output format.</p>
  </div>

  <!-- ── THE ADAPTER ── -->
  <h3 style="margin-top:48px">Chapter 4: The Adapter (Where the Real World Meets the Brain)</h3>

  <p>Everything above was the brain &mdash; pure logic. Now let's see how it connects to the real world:</p>

  <div class="code-block">
    <div class="code-line"><span class="code-text"># adapters/flask/label_generator/app.py</span><span class="code-note"></span></div>
    <div class="code-line"><span class="code-text"># Inside the /generate web route:</span><span class="code-note"></span></div>
    <div class="code-line"><span class="code-text"></span></div>
    <div class="code-line hi-orange"><span class="code-text">payload = presenter.build_payload(body, rows)</span><span class="code-note orange">Translate: web request &rarr; core format</span></div>
    <div class="code-line"><span class="code-text"></span></div>
    <div class="code-line hi-green"><span class="code-text">result = run_contract(ToolInput(payload=payload)).result</span><span class="code-note green">Call the brain &mdash; pure math happens here</span></div>
    <div class="code-line"><span class="code-text"></span></div>
    <div class="code-line hi-purple"><span class="code-text">io.render_plan_to_pdf(result, output_path)</span><span class="code-note purple">Turn the plan into an actual PDF file</span></div>
    <div class="code-line"><span class="code-text"></span></div>
    <div class="code-line hi-purple"><span class="code-text">return io.pdf_response(output_path, filename)</span><span class="code-note purple">Send the PDF to the user's browser</span></div>
  </div>

  <div class="explain">
    <div class="explain-title">What the adapter does</div>
    <p><strong>Line 1 (presenter):</strong> The user submitted a web form with an Excel file. The presenter translates that web request into the format the brain expects (a plain dictionary). The brain never sees HTML, HTTP headers, or file uploads.</p>
    <p><strong>Line 2 (run_contract):</strong> Calls the brain. The adapter doesn't know what happens inside. It sends in data, gets back a result. Like putting a letter in the mailbox &mdash; you don't need to know how the postal system works.</p>
    <p><strong>Lines 3-4 (io):</strong> Takes the brain's plan (coordinates, text) and actually renders it into a PDF using a library called reportlab. Then sends that file to the user's browser as a download.</p>
    <p><strong>Key point:</strong> The adapter is allowed to be messy. It's glue code. What matters is that the brain stays clean &mdash; and it does, because <strong>21 automated checks</strong> enforce it on every commit.</p>
  </div>
</section>

<!-- ================================================================ -->
<!-- PART 4: HOW IT ALL RUNS -->
<!-- ================================================================ -->
<section id="how-it-runs">
  <div class="section-label green">Part Four</div>
  <h2>The Complete Flow, Start to Finish</h2>

  <p>Let's trace a real request from the moment a user clicks "Generate" to the moment they get a PDF:</p>

  <div class="flow">
    <div class="flow-box" style="border-color:var(--orange);background:var(--glow-orange)">
      <div class="flow-box-name" style="color:var(--orange)">User Uploads Excel + Clicks Generate</div>
      <div class="flow-box-desc">A person on a web browser submits a form</div>
    </div>
    <div class="flow-arrow">
      <div class="flow-arrow-line"></div>
      <div class="flow-arrow-label">presenter.build_payload()</div>
      <div class="flow-arrow-tip"></div>
    </div>
    <div class="flow-box" style="border-color:var(--blue);background:var(--glow-blue)">
      <div class="flow-box-name" style="color:var(--blue)">Raw Payload (dictionary)</div>
      <div class="flow-box-desc">Web request translated into brain's language</div>
    </div>
    <div class="flow-arrow">
      <div class="flow-arrow-line"></div>
      <div class="flow-arrow-label">service.build_job()</div>
      <div class="flow-arrow-tip"></div>
    </div>
    <div class="flow-box" style="border-color:var(--green);background:var(--glow-green)">
      <div class="flow-box-name" style="color:var(--green)">LabelJob (validated work order)</div>
      <div class="flow-box-desc">Input checked, cleaned, structured</div>
    </div>
    <div class="flow-arrow">
      <div class="flow-arrow-line"></div>
      <div class="flow-arrow-label">service.compute_plan()</div>
      <div class="flow-arrow-tip"></div>
    </div>
    <div class="flow-box" style="border-color:var(--purple);background:var(--glow-purple)">
      <div class="flow-box-name" style="color:var(--purple)">RenderPlan (every label positioned)</div>
      <div class="flow-box-desc">All math done. 60 labels across 2 pages.</div>
    </div>
    <div class="flow-arrow">
      <div class="flow-arrow-line"></div>
      <div class="flow-arrow-label">io.render_plan_to_pdf()</div>
      <div class="flow-arrow-tip"></div>
    </div>
    <div class="flow-box" style="border-color:var(--orange);background:var(--glow-orange)">
      <div class="flow-box-name" style="color:var(--orange)">PDF File Downloaded</div>
      <div class="flow-box-desc">User gets their mailing labels</div>
    </div>
  </div>

  <div class="sandwich">
    <div class="sandwich-layer" style="border-color:var(--orange);background:var(--glow-orange)">
      <span class="sandwich-icon">&#x1F4E5;</span>
      <div>
        <div class="sandwich-label" style="color:var(--orange)">Adapter reads Excel file</div>
        <div class="sandwich-type">Plumbing &mdash; touches the real world</div>
      </div>
    </div>
    <div class="sandwich-layer" style="border-color:var(--green);background:var(--glow-green)">
      <span class="sandwich-icon">&#x1F9E0;</span>
      <div>
        <div class="sandwich-label" style="color:var(--green)">build_job(payload)</div>
        <div class="sandwich-type">Decision &mdash; pure logic</div>
      </div>
    </div>
    <div class="sandwich-layer" style="border-color:var(--green);background:var(--glow-green)">
      <span class="sandwich-icon">&#x1F9E0;</span>
      <div>
        <div class="sandwich-label" style="color:var(--green)">compute_plan(job)</div>
        <div class="sandwich-type">Decision &mdash; pure logic</div>
      </div>
    </div>
    <div class="sandwich-layer" style="border-color:var(--green);background:var(--glow-green)">
      <span class="sandwich-icon">&#x1F9E0;</span>
      <div>
        <div class="sandwich-label" style="color:var(--green)">to_result_dict(job, plan)</div>
        <div class="sandwich-type">Decision &mdash; pure logic</div>
      </div>
    </div>
    <div class="sandwich-layer" style="border-color:var(--orange);background:var(--glow-orange)">
      <span class="sandwich-icon">&#x1F4E4;</span>
      <div>
        <div class="sandwich-label" style="color:var(--orange)">Adapter renders PDF + sends to browser</div>
        <div class="sandwich-type">Plumbing &mdash; touches the real world</div>
      </div>
    </div>
  </div>

  <div class="analogy green">
    <div class="analogy-label green">The sandwich pattern</div>
    <p><strong>Top bread:</strong> Plumbing (read the input from the real world)</p>
    <p><strong>Filling:</strong> Decisions (pure math &mdash; no files, no web, no database)</p>
    <p><strong>Bottom bread:</strong> Plumbing (write the output to the real world)</p>
    <p>The filling never touches the real world. The bread never does math. <strong>This is the entire architecture in one picture.</strong></p>
  </div>

  <div class="panel glow-blue">
    <div class="panel-title" style="color:var(--blue)">Why This Makes Testing Easy</div>
    <p style="font-size:14px">Because the brain is pure math, you can test it <strong>without any files, web servers, or PDFs</strong>. Feed in a LabelJob, check the RenderPlan. Does label #30 land on page 2? Do 47 input rows with 3 blank rows produce 44 filtered rows? Does 44 rows x 2 copies = 88 labels? All of this can be verified with simple math checks that run in milliseconds.</p>
    <p style="font-size:14px">An enterprise client asks: "How do you know the positioning is correct?" You show them the test: <code>assert positions[30].page == 1</code> &mdash; label 31 is on page 2. Proven. Not "we checked it manually." <strong>Proven with code.</strong></p>
  </div>
</section>

<!-- ================================================================ -->
<!-- PART 5: THE WALL -->
<!-- ================================================================ -->
<section id="the-wall">
  <div class="section-label" style="color:var(--red)">Part Five</div>
  <h2>Where This Program Hits Its Limit</h2>

  <div class="limit-line">
    <div class="limit-line-title">The Brick vs. The Wall</div>
    <div class="limit-line-desc">
      Everything you've learned makes <strong>one excellent brick</strong>. A perfectly structured, testable, changeable tool. But an enterprise system isn't one brick. It's a wall &mdash; dozens of tools working together. And this program <strong>cannot tell you how to build the wall</strong>.
    </div>
  </div>

  <p>Here's the honest truth about what this architecture can and cannot do:</p>

  <h3 style="margin-top:32px">What It Can Do (and does brilliantly)</h3>

  <div class="step-grid">
    <div class="step-item" style="border-color:rgba(72,187,120,0.3);background:rgba(72,187,120,0.04)">
      <div class="step-num" style="background:var(--green)">1</div>
      <div class="step-content">
        <div class="step-title" style="color:var(--green)">Build one tool that stays changeable</div>
        <div class="step-desc">Label generator, order quote, invoice builder &mdash; each one is a fortress of clean architecture. You can change any part without breaking the others.</div>
      </div>
    </div>
    <div class="step-item" style="border-color:rgba(72,187,120,0.3);background:rgba(72,187,120,0.04)">
      <div class="step-num" style="background:var(--green)">2</div>
      <div class="step-content">
        <div class="step-title" style="color:var(--green)">Add features safely</div>
        <div class="step-desc">New label format? Add one constant. Excel support? Add one reader function. Web interface? Add one adapter. Existing code barely changes.</div>
      </div>
    </div>
    <div class="step-item" style="border-color:rgba(72,187,120,0.3);background:rgba(72,187,120,0.04)">
      <div class="step-num" style="background:var(--green)">3</div>
      <div class="step-content">
        <div class="step-title" style="color:var(--green)">Work with AI reliably</div>
        <div class="step-desc">Because each file is small and focused, an AI can work on one file without accidentally breaking others. The automated checks catch mistakes before they ship.</div>
      </div>
    </div>
  </div>

  <h3 style="margin-top:32px">What It Cannot Do</h3>

  <div class="step-grid">
    <div class="step-item" style="border-color:rgba(252,129,129,0.3);background:rgba(252,129,129,0.04)">
      <div class="step-num" style="background:var(--red)">1</div>
      <div class="step-content">
        <div class="step-title" style="color:var(--red)">Connect tools to each other</div>
        <div class="step-desc">You have an order quote tool and an invoice tool. Each works perfectly. Now you need the quote to feed into the invoice. <strong>How?</strong> This architecture goes silent. It tells you how to build bricks, not how to lay mortar.</div>
      </div>
    </div>
    <div class="step-item" style="border-color:rgba(252,129,129,0.3);background:rgba(252,129,129,0.04)">
      <div class="step-num" style="background:var(--red)">2</div>
      <div class="step-content">
        <div class="step-title" style="color:var(--red)">Handle failure across tools</div>
        <div class="step-desc">If the invoice generation fails after the payment was charged, you need to refund the payment. A single tool doesn't know about the other tools it's connected to. Who owns that "undo" logic?</div>
      </div>
    </div>
    <div class="step-item" style="border-color:rgba(252,129,129,0.3);background:rgba(252,129,129,0.04)">
      <div class="step-num" style="background:var(--red)">3</div>
      <div class="step-content">
        <div class="step-title" style="color:var(--red)">Scale to real enterprise workflows</div>
        <div class="step-desc">An enterprise order process might touch 10 tools: pricing, credit check, inventory, invoicing, payment, shipping, notifications, analytics, compliance, archiving. Without composition discipline, the "glue code" between them becomes 70% of your codebase &mdash; untested, unstructured, and unmaintainable.</div>
      </div>
    </div>
  </div>

  <div class="analogy" style="border-left-color:var(--red)">
    <div class="analogy-label" style="color:var(--red)">The N-Squared Problem</div>
    <p>If you have <strong>5 tools</strong> that need to talk to each other, that's up to <strong>25</strong> connection points. With <strong>10 tools</strong>, it's <strong>100</strong>. With <strong>20 tools</strong>, it's <strong>400</strong>.</p>
    <p>Without a system for managing those connections, the glue overwhelms the tools. You built 20 beautiful bricks and drowned them in sloppy mortar. <strong>The mortar becomes the system, and nobody planned it.</strong></p>
  </div>

  <p>This isn't a failure of the architecture. It's a <strong>boundary</strong>. The manifesto that resonated with you &mdash; <em>"Building Software That Stays Soft"</em> &mdash; was always explicit about this: it teaches you how to build a brick. The wall needs its own discipline.</p>
</section>

<!-- ================================================================ -->
<!-- PART 6: THE NEXT LEVEL -->
<!-- ================================================================ -->
<section id="next-level">
  <div class="section-label purple">Part Six</div>
  <h2>The Next Level: Composing Software That Stays Soft</h2>

  <p>There is a second document &mdash; <strong>"Composing Software That Stays Soft"</strong> &mdash; that picks up exactly where this one stops. It applies the <em>same discipline</em> to the connections between tools that the first manifesto applies inside them.</p>

  <p>Here's a preview of what it teaches:</p>

  <div class="step-grid">
    <div class="step-item" style="border-color:rgba(183,148,244,0.3);background:rgba(183,148,244,0.04)">
      <div class="step-num" style="background:var(--purple)">1</div>
      <div class="step-content">
        <div class="step-title" style="color:var(--purple)">Translators &mdash; The Mortar Between Bricks</div>
        <div class="step-desc">Pure functions that convert one tool's output into another tool's input. When the order quote tool changes its output shape, <strong>only the translator changes</strong>. The invoice tool never knows.</div>
      </div>
    </div>
    <div class="step-item" style="border-color:rgba(183,148,244,0.3);background:rgba(183,148,244,0.04)">
      <div class="step-num" style="background:var(--purple)">2</div>
      <div class="step-content">
        <div class="step-title" style="color:var(--purple)">Flow Runners &mdash; The Dumb Orchestrator, One Level Up</div>
        <div class="step-desc">Just like the orchestrator inside a tool has zero branching, the flow runner between tools has zero branching. It's a recipe: "run quote, translate, run credit check, translate, run invoice." Under 40 lines.</div>
      </div>
    </div>
    <div class="step-item" style="border-color:rgba(183,148,244,0.3);background:rgba(183,148,244,0.04)">
      <div class="step-num" style="background:var(--purple)">3</div>
      <div class="step-content">
        <div class="step-title" style="color:var(--purple)">Result Types &mdash; Making Failure Visible</div>
        <div class="step-desc">Instead of crashing when something goes wrong, each step returns either <em>Ok(value)</em> or <em>Err(reason)</em>. The flow runner follows the success track until something diverts it. No hidden surprises.</div>
      </div>
    </div>
    <div class="step-item" style="border-color:rgba(183,148,244,0.3);background:rgba(183,148,244,0.04)">
      <div class="step-num" style="background:var(--purple)">4</div>
      <div class="step-content">
        <div class="step-title" style="color:var(--purple)">Compensation &mdash; The Undo Button</div>
        <div class="step-desc">For every step that touches the real world (charges a payment, sends an email), you define the reverse action. If step 3 fails, run the undo for step 2, then step 1. <strong>And here's the payoff:</strong> because your tools are pure math, most steps don't need undoing at all. Only the adapters do.</div>
      </div>
    </div>
  </div>

  <div class="next-level">
    <h3>The Same Principle, Applied Fractally</h3>
    <p><strong>Inside a function:</strong> separate decisions from plumbing.<br>
    <strong>Inside a tool:</strong> separate core from adapters.<br>
    <strong>Between tools:</strong> separate flows from translators.</p>
    <p>It's the same idea at every level. Once you truly understand it at one level, you can apply it at every level. That's what makes this architecture <strong>scalable to enterprise</strong>.</p>
  </div>

  <div class="analogy purple">
    <div class="analogy-label purple">But why wait? Why learn now before LLMs are "enterprise ready"?</div>
    <p>Because <strong>the architecture is the human's job</strong>. LLMs are extraordinary at writing code &mdash; filling in functions, implementing logic, generating tests. What they cannot do is <em>design the structure</em>. They can lay bricks, but they can't draw the blueprint.</p>
    <p>When LLMs reach enterprise capability &mdash; and they will &mdash; the people who understand architecture will direct them. The people who don't will still be asking the LLM to "build me an app" and getting a monolith that turns to concrete after five changes.</p>
    <p><strong>You are learning the one thing the AI cannot do for itself.</strong> You are learning to be the architect. That's not just a head start &mdash; it's the entire game.</p>
  </div>
</section>

<!-- ================================================================ -->
<!-- PART 7: YOUR PATH -->
<!-- ================================================================ -->
<section id="your-path">
  <div class="section-label gold">Part Seven</div>
  <h2>Your Path Forward</h2>

  <p>You've now read every line of a real production tool, understood the architecture behind it, and seen exactly where it stops working and why. Here's what to do with that knowledge.</p>

  <div class="step-grid">
    <div class="step-item" style="border-color:rgba(236,201,75,0.3);background:rgba(236,201,75,0.04)">
      <div class="step-num" style="background:var(--gold);color:#1a1a2e">1</div>
      <div class="step-content">
        <div class="step-title" style="color:var(--gold)">Master the Brick First</div>
        <div class="step-desc">Build one tool using this architecture. Not a complex one &mdash; something like a tip calculator or a unit converter. Follow the 6-step workflow in <code>docs/soft/WORKFLOW.md</code>. Run <code>python3 scripts/preflight.py</code> until every check passes. Feel the discipline in your hands.</div>
      </div>
    </div>
    <div class="step-item" style="border-color:rgba(236,201,75,0.3);background:rgba(236,201,75,0.04)">
      <div class="step-num" style="background:var(--gold);color:#1a1a2e">2</div>
      <div class="step-content">
        <div class="step-title" style="color:var(--gold)">Read the Code with the 4-Step Method</div>
        <div class="step-desc">Open the code-reading-trainer (<code>code-reading-trainer.html</code>). It teaches you to read any tool in this repo in under 5 minutes: shapes first, then the orchestrator, then zoom into the one function you need. You never read the whole codebase. You read the story.</div>
      </div>
    </div>
    <div class="step-item" style="border-color:rgba(236,201,75,0.3);background:rgba(236,201,75,0.04)">
      <div class="step-num" style="background:var(--gold);color:#1a1a2e">3</div>
      <div class="step-content">
        <div class="step-title" style="color:var(--gold)">Build a Second Brick, Then Connect Them</div>
        <div class="step-desc">That's where you'll hit the wall. And that's the right time to open "Composing Software That Stays Soft." You'll understand the problem in your bones because you lived it, not because someone told you about it.</div>
      </div>
    </div>
    <div class="step-item" style="border-color:rgba(236,201,75,0.3);background:rgba(236,201,75,0.04)">
      <div class="step-num" style="background:var(--gold);color:#1a1a2e">4</div>
      <div class="step-content">
        <div class="step-title" style="color:var(--gold)">Let the AI Write the Code. You Provide the Architecture.</div>
        <div class="step-desc">You don't need to memorize syntax. You need to know: what are the data shapes? What decisions does this tool make? What's the orchestrator? What are the boundaries? <strong>That's the architect's job.</strong> The AI fills in the implementation. The 21 automated checks catch its mistakes.</div>
      </div>
    </div>
  </div>

  <div class="divider"></div>

  <div class="panel glow-gold">
    <div class="panel-title" style="color:var(--gold)">A Final Thought</div>
    <p style="font-size:15px">School taught you that learning means memorizing and repeating. Business taught you that learning means doing and adjusting. Software architecture is business, not school.</p>
    <p style="font-size:15px">You don't need to memorize what a <code>dataclass</code> is. You need to understand that <strong>data shapes are the foundation</strong> &mdash; get them right and everything else follows. You don't need to write a <code>for</code> loop from memory. You need to understand that <strong>the orchestrator stays dumb</strong> &mdash; decisions happen in dedicated functions, not in the wiring.</p>
    <p style="font-size:15px">You already think in systems. You already separate concerns instinctively. You already know that good structure survives personnel changes and shifting requirements.</p>
    <p style="font-size:15px"><strong>You have the hardest part.</strong> The code is just the vocabulary for expressing what you already know.</p>
  </div>

  <div class="callout" style="border-color:rgba(99,179,237,0.3);background:var(--glow-blue);margin-top:40px">
    <div class="callout-icon">&#x1F4DA;</div>
    <div class="callout-title" style="color:var(--blue);margin-top:8px">Your Reading Order</div>
    <div class="callout-body">
      <strong>Where you are now:</strong> This document (your-foundation.html) &mdash; understanding the brick<br><br>
      <strong>Practice:</strong> code-reading-trainer.html &mdash; learn to read any tool in 5 minutes<br><br>
      <strong>Deep theory:</strong> BUILDING_SOFTWARE_THAT_STAYS_SOFT.md &mdash; the manifesto (you've read this)<br><br>
      <strong>Next level:</strong> COMPOSING_SOFTWARE_THAT_STAYS_SOFT.docx &mdash; building the wall<br><br>
      <strong>Hands-on:</strong> docs/soft/WORKFLOW.md &mdash; the 6-step build process to follow when building
    </div>
  </div>
</section>

</div>

<footer>
  <strong>Your Foundation</strong> &mdash; Built for the person who leads by doing.<br>
  The architecture is the one thing AI cannot do for itself. Learn it now.<br><br>
  <span style="color:var(--faint)">tool-hub &bull; Soft Code Architecture &bull; 2026</span>
</footer>

<script>
// Reading progress bar
window.addEventListener('scroll', () => {
  const h = document.documentElement;
  const pct = (h.scrollTop / (h.scrollHeight - h.clientHeight)) * 100;
  document.getElementById('progressFill').style.width = Math.min(pct, 100) + '%';
});

// Active nav pill
const sections = document.querySelectorAll('section[id], .hero[id]');
const pills = document.querySelectorAll('.nav-pill');
const observer = new IntersectionObserver(entries => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      const id = entry.target.id;
      pills.forEach(p => {
        p.classList.toggle('active', p.getAttribute('href') === '#' + id);
      });
    }
  });
}, { rootMargin: '-80px 0px -60% 0px', threshold: 0 });
sections.forEach(s => observer.observe(s));
</script>
</body>
</html>
